(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{48:function(t,e,c){},50:function(t,e,c){},51:function(t,e,c){},52:function(t,e,c){},53:function(t,e,c){},54:function(t,e,c){"use strict";c.r(e);var n=c(1),s=c(25),a=c.n(s),i=c(16),o=c(3),l=c(4),r=c.n(l),d=c(2),j=c(12),u=c.n(j),m=c.p+"static/media/remove24.fea57046.svg",b=c(13),h=(c(48),c(0)),f=function(t){var e=t.color,c=t.onClick,n=t.className;return Object(h.jsx)("i",{onClick:c,className:u()("circle",Object(b.a)({},"  circle circle__".concat(e),e),n)})},O=(c(50),function(t){var e=t.items,c=t.isRemovable,n=t.onClick,s=t.onRemove,a=t.onClickItem,i=t.activeItem;return Object(h.jsx)("ul",{onClick:n,className:"list",children:e.map((function(t,e){return Object(h.jsxs)("li",{className:u()(t.className,{active:t.active?t.active:i&&i.id===t.id}),onClick:a?function(){return a(t)}:null,children:[Object(h.jsx)("i",{children:t.icon?t.icon:Object(h.jsx)(f,{color:t.color.name})}),Object(h.jsxs)("span",{children:[t.name,t.tasks&&"   (".concat(t.tasks.length,")                 ")]}),c&&Object(h.jsx)("img",{className:"list__remove",src:m,alt:"delete",onClick:function(){return function(t){window.confirm("\u0420\u0435\u0430\u043b\u044c\u043d\u043e?")&&r.a.delete("http://localhost:3001/lists/"+t.id).then((function(){s(t.id)}))}(t)}})]},e)}))})}),p=c(15),x=c.p+"static/media/plus24.93043b6e.svg",v=(c(51),function(t){var e=t.colors,c=t.onAdd,s=Object(n.useState)(!1),a=Object(o.a)(s,2),i=a[0],l=a[1],d=Object(n.useState)(3),j=Object(o.a)(d,2),u=j[0],m=j[1],b=Object(n.useState)(!1),v=Object(o.a)(b,2),k=v[0],_=v[1],g=Object(n.useState)(""),N=Object(o.a)(g,2),w=N[0],C=N[1];Object(n.useEffect)((function(){Array.isArray(e)&&m(e[0].id)}),[e]);var T=function(){l(!1),C(""),m(e[0].id)};return Object(h.jsxs)("div",{className:"add-list",children:[Object(h.jsx)(O,{onClick:function(){return l(!i)},items:[{className:"list__bottomAdd",icon:Object(h.jsx)("img",{src:x,alt:"plus"}),name:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"}]}),i&&Object(h.jsxs)("div",{className:"add-list-popup ",children:[Object(h.jsxs)("svg",{onClick:T,className:"add-list-popup__close",xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 0 24 24",width:"20px",fill:"#000",children:[Object(h.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(h.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})]}),Object(h.jsx)("input",{value:w,onChange:function(t){return C(t.target.value)},className:"field",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0430\u043f\u043a\u0438"}),Object(h.jsx)("div",{className:"add-list-popup__colors",children:Object(h.jsx)("ul",{children:Object(h.jsx)("li",{children:e.map((function(t){return Object(h.jsx)(f,{onClick:function(){return m(t.id)},color:t.name,className:u===t.id&&"active"},t.id)}))})})}),Object(h.jsx)("button",{onClick:function(){w?(_(!0),r.a.post("http://localhost:3001/lists",{name:w,colorId:u}).then((function(t){var n=t.data,s=e.filter((function(t){return t.id===u}))[0],a=Object(p.a)(Object(p.a)({},n),{},{color:{name:s.name,hex:s.hex},tasks:[]});c(a),T()})).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){_(!1)}))):alert("\u041f\u0443\u0441\u0442\u043e\u0435 \u043f\u043e\u043b\u0435")},className:"button",children:k?"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435...":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})}),k=c(8),_=c.p+"static/media/edit24p.d1af3034.svg",g=(c(52),c.p+"static/media/plus24.93043b6e.svg"),N=function(t){var e=t.list,c=t.onAddTask,s=Object(n.useState)(!1),a=Object(o.a)(s,2),i=a[0],l=a[1],d=Object(n.useState)(""),j=Object(o.a)(d,2),u=j[0],m=j[1],b=Object(n.useState)(!1),f=Object(o.a)(b,2),O=f[0],p=f[1],x=function(){l(!i),m("")};return Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"tasks__form",children:i?Object(h.jsxs)("div",{className:"tasks__form-block",children:[Object(h.jsx)("input",{value:u,className:"field field-tasks",type:"text",placeholder:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438",onChange:function(t){return m(t.target.value)}}),Object(h.jsx)("button",{disabled:O,onClick:function(){var t={listId:e.id,text:u,completed:!1};p(!0),r.a.post("http://localhost:3001/tasks/",t).then((function(t){var n=t.data;c(e.id,n),x()})).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430")})).finally((function(){p(!1)}))},className:"button button--add",children:O?"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435...":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"}),Object(h.jsx)("button",{onClick:x,className:"button button--cancel",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]}):Object(h.jsxs)("div",{onClick:x,className:"tasks__form-new",children:[Object(h.jsx)("img",{src:g,alt:"plus"}),Object(h.jsx)("span",{children:" \u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430"})]})})})};var w=function(t){var e=t.task,c=t.onRemove,n=t.onEdit,s=t.list,a=t.onComplete;return Object(h.jsxs)("div",{className:"tasks__items-row",children:[Object(h.jsxs)("div",{className:"checkbox",children:[Object(h.jsx)("input",{onChange:function(t){a(s.id,e.id,t.target.checked)},id:"task-".concat(e.id),type:"checkbox",checked:e.completed}),Object(h.jsx)("label",{htmlFor:"task-".concat(e.id),children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"18px",viewBox:"0 0 24 24",width:"18px",fill:"#000000",children:[Object(h.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(h.jsx)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})]})})]}),Object(h.jsx)("p",{children:e.text}),Object(h.jsx)("img",{onClick:function(){return n(s.id,e.id,e.text)},className:"tasks__items-row-edit",src:_,alt:"remove"}),Object(h.jsx)("img",{onClick:function(){return c(s.id,e.id)},className:"tasks__items-row-remove",src:m,alt:"delete"})]},e.id)},C=function(t){var e=t.list,c=t.onEditTitle,n=t.onAddTask,s=t.withOutEmpty,a=t.onRemoveTask,i=t.onEditTask,o=t.onCompleteTask;t.navigate;return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{className:"tasks",children:Object(h.jsx)(k.b,{to:"/lists/"+e.id,children:Object(h.jsxs)("h2",{style:{color:e.color.hex},className:"tasks__title",children:[e.name,Object(h.jsx)("img",{onClick:function(){var t=window.prompt("\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430",e.name);t&&(c(e.id,t),r.a.patch("http://localhost:3001/lists/"+e.id,{name:t}).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430")})))},src:_,alt:"Edit icon"})]})})}),Object(h.jsxs)("div",{className:"tasks__items",children:[!s&&e.tasks&&!e.tasks.length&&Object(h.jsx)("h2",{children:"\u0417\u0430\u0434\u0430\u0447\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442"}),e.tasks&&e.tasks.map((function(t){return Object(h.jsx)(w,{onEdit:i,onRemove:a,onComplete:o,task:t,list:e},t.id)})),Object(h.jsx)(N,{list:e,onAddTask:n},e.id)]})]})},T=c.p+"static/media/subject_black_24dp.e643ec18.svg";var E=function(){var t=Object(n.useState)(null),e=Object(o.a)(t,2),c=e[0],s=e[1],a=Object(n.useState)(null),l=Object(o.a)(a,2),j=l[0],u=l[1],m=Object(n.useState)(null),b=Object(o.a)(m,2),f=b[0],p=b[1],x=Object(n.useState)(""),k=Object(o.a)(x,2),_=k[0],g=k[1],N=Object(d.f)();Object(n.useEffect)((function(){r.a.get("http://localhost:3001/lists?_expand=color&_embed=tasks").then((function(t){var e=t.data;s(e)})),r.a.get("http://localhost:3001/colors").then((function(t){var e=t.data;u(e)}))}),[]);var w=function(t,e){var n=c.map((function(c){return c.id===t&&(c.tasks=[].concat(Object(i.a)(c.tasks),[e])),c}));s(n)},E=function(t,e){var n=c.map((function(c){return c.id===t&&(c.name=e),c}));s(n)},y=function(t,e,n){var a=window.prompt("\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438",n);if(a){var i=c.map((function(c){return c.id===t&&(c.tasks=c.tasks.map((function(t){return t.id===e&&(t.text=a),t}))),c}));s(i),r.a.patch("http://localhost:3001/tasks/"+e,{text:a}).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430")}))}},S=function(t,e){if(window.confirm("\u0420\u0435\u0430\u043b\u044c\u043d\u043e?")){var n=c.map((function(c){return c.id===t&&(c.tasks=c.tasks.filter((function(t){return t.id!==e}))),c}));s(n),r.a.delete("http://localhost:3001/tasks/"+e).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430")}))}},A=function(t,e,n){var a=c.map((function(c){return c.id===t&&(c.tasks=c.tasks.map((function(t){return t.id===e&&(t.completed=n),t}))),c}));s(a),r.a.patch("http://localhost:3001/tasks/"+e,{completed:n}).catch((function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430")}))};return Object(n.useEffect)((function(){if(c){var t=c.find((function(t){return t.id===Number(_)}));p(t)}}),[_]),Object(h.jsxs)("div",{className:"todo",children:[Object(h.jsxs)("div",{className:"todo__sidebar",children:[Object(h.jsx)(O,{onClickItem:function(t){N("/"),g(t.id)},items:[{icon:Object(h.jsx)("img",{src:T,alt:"listicon"}),name:"\u0412\u0441\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",active:!f}]}),c?Object(h.jsx)(O,{items:c,onRemove:function(t){var e=c.filter((function(e){return e.id!==t}));s(e)},onClickItem:function(t){N("/lists/"+t.id),g(t.id)},activeItem:f,isRemovable:!0}):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",Object(h.jsx)(v,{onAdd:function(t){var e=[].concat(Object(i.a)(c),[t]);s(e)},colors:j})]}),Object(h.jsx)("div",{className:"todo__tasks",children:Object(h.jsxs)(d.c,{children:[Object(h.jsx)(d.a,{exact:!0,path:"/",element:c&&c.map((function(t){return Object(h.jsx)(C,{list:t,onAddTask:w,onEditTitle:E,onRemoveTask:S,onEditTask:y,onCompleteTask:A,withOutEmpty:!0},t.id)}))}),Object(h.jsx)(d.a,{path:"/lists/"+_,element:c&&f&&Object(h.jsx)(C,{list:f,onAddTask:w,onEditTitle:E,onRemoveTask:S,onEditTask:y,onCompleteTask:A})})]})})]})};c(53);a.a.render(Object(h.jsx)(k.a,{children:Object(h.jsx)(E,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.635bbfa3.chunk.js.map